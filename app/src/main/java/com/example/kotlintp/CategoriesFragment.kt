package com.example.kotlintp

import android.os.Bundle
import androidx.fragment.app.Fragment
import androidx.recyclerview.widget.GridLayoutManager
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import com.example.kotlintp.data.Categories


class CategoriesFragment : Fragment() {

    private var columnCount = 1

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        arguments?.let {
            columnCount = it.getInt(ARG_COLUMN_COUNT)
        }
    }

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        val view = inflater.inflate(R.layout.fragment_item_list, container, false)

        // Créer les catégories
        val categories = listOf(
            Categories(1, "Cinéma", "data:image/jpeg;base64,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"),
            Categories(2, "Jeux Video", ""),
            Categories(3, "FunFact", ""),
            Categories(4, "Musique", "")
        )

        // Set the adapter
        if (view is RecyclerView) {
            with(view) {
                layoutManager = when {
                    columnCount <= 1 -> LinearLayoutManager(context)
                    else -> GridLayoutManager(context, columnCount)
                }
                adapter = MyCategoriesRecyclerViewAdapter(categories)
            }
        }
        return view
    }

    companion object {
        const val ARG_COLUMN_COUNT = "column-count"

        @JvmStatic
        fun newInstance(columnCount: Int) =
            CategoriesFragment().apply {
                arguments = Bundle().apply {
                    putInt(ARG_COLUMN_COUNT, columnCount)
                }
            }
    }
}